# Cross-chain FDC

This is an example of how to use the FDC protocol on the XRPL EVM sidechain.

A prerequisite for this example is that Flare's `Relay` contract has been relayed to the non-Flare chain, and that it is live-updated with transaction to the original `Relay` contract.

## Demo workflow

- (optional) Run `deployFlareContracts.ts` with the `xrplEVMTestchain` network parameter to deploy the necessary Flare contracts onto the XRPL EVM Testchain.
  The `configs.ts` file will be regenerated with the addresses of the newly-deployed `AddressUpdater` and `FdcVerification` contracts.
- (optional) Run `prepareAndSubmitRequest.ts` with the `coston2` network parameter to prepare the attestation request and submit it to the FDC protocol.
- Run `deliverProofToContract.ts` with the `xrplEVMTestchain` network parameter to deploy and verify the `StarWarsCharacterListV3` contract, fetch the data from the FDC, and call the `addCharacter` function of the `StarWarsCharacterListV3` contract using the FDC data.

Scripts are run with the following command.

```sh
yarn hardhat run scripts/crossChainFdc/<FileName.ts> --network <network>
```

You can copy the exact command from a comment at the top of each script, after the imports.

The corresponding contracts are defined in `contracts/crossChainFdc/<FileName.ts>`.

## Directory structure

```sh
├── config.ts: auto-generated by deployFlareContracts.ts, to store the AddressUpdater and FdcVerification addresses
├── deliverProofToContract.ts: deploys and verifies the StarWarsCharacterListV3 contract, and adds a character using FDC data
├── deployFlareContracts.ts: deploys auxiliary Flare contracts
├── prepareAndSubmitRequest.ts: prepares the request and submits it to the FDC
├── README.md
└── request.ts: auto-generated by prepareAndSubmitRequest.ts, to store the roundId and abiEncoded request constants
```
